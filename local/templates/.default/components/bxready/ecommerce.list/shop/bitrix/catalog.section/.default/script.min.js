"use strict";const ProductListComponent={nodes:{buttons:{addToBasket:document.querySelectorAll("button.bxr-basket-add"),tradeRequest:document.querySelectorAll("button.bxr-trade-request")}},checkedProducts:{},run:function(){this.init.buttons()},init:{buttons:function(){if(ProductListComponent.nodes.buttons.length===0){return}for(let code in ProductListComponent.nodes.buttons){let buttons=ProductListComponent.nodes.buttons[code];if(buttons.length===0){continue}for(let i=0;i<buttons.length;i++){let button=buttons[i];button.addEventListener("click",ProductListComponent.action.button[code],false)}}}},action:{button:{addToBasket:function(c){const a=this;const b=a.parentNode.querySelector("input[data-item]").dataset.item;if(!b){return}if(ProductListComponent.checkedProducts.hasOwnProperty(b)){let product=ProductListComponent.checkedProducts[b];if(product.canAdd===false){c.preventDefault();c.stopPropagation();if(product.message){BX.UI.Notification.Center.notify({content:product.message,autoHideDelay:600000})}}}else{c.preventDefault();c.stopPropagation();BX.ajax.runComponentAction("native:order.create","checkAbilityAddToBasket",{mode:"class",data:{productId:b}}).then(function(d){d=d.data;if(d.hasOwnProperty("redirect")){window.location.href=d.redirect;return}ProductListComponent.checkedProducts[b]=d;if(d.canAdd===false){if(d.message){BX.UI.Notification.Center.notify({content:d.message,autoHideDelay:600000})}}else{a.click()}})}},tradeRequest:function(c){const a=this;const b=a.dataset.tradeId;if(!b){return}c.preventDefault();c.stopPropagation();BX.ajax.runComponentAction("native:order.create","checkAbilityAddToBasket",{mode:"class",data:{productId:b}}).then(function(d){d=d.data;if(d.hasOwnProperty("redirect")){window.location.href=d.redirect;return}a.click()})}}}};ProductListComponent.run();