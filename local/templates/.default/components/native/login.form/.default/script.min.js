"use strict";const LoginForm={component:"native:login.form",btnLoginByPassword:document.forms.login.elements.loginByPassword,btnLoginByEmail:document.forms.login.elements.loginByEmail,construct:function(){this.initButtons()},initButtons:function(){if(this.btnLoginByEmail){this.btnLoginByEmail.addEventListener("click",this.login,false)}if(this.btnLoginByPassword){this.btnLoginByPassword.addEventListener("click",this.login,false)}},login:function(a){a.preventDefault();a.stopPropagation();let _self=this;let loginType=_self.name;BX.UI.Notification.Center.notify({content:"Проверяем данные",autoHideDelay:3000});BX.ajax.runComponentAction(LoginForm.component,loginType,{mode:"class",data:{request:{login:document.forms.login.elements.login.value,password:document.forms.login.elements.password.value,email:document.forms.login.elements.email.value}}}).then(function(b){if(b.status!=="success"){BX.UI.Notification.Center.notify({content:"Что-то пошло не так",autoHideDelay:3000});return}b=b.data;if(b.error){if(b.type==="USER_NOT_FOUND"){BX.UI.Notification.Center.notify({content:b.error,autoHide:true,autoHideDelay:8000,actions:[{title:"Регистрация",events:{click:function(){window.location.href="/registration/"}}}]});return}if(Array.isArray(b.error)===true){for(let i=0;i<b.error.length;i++){BX.UI.Notification.Center.notify({content:b.error[i],autoHideDelay:3000})}}else{BX.UI.Notification.Center.notify({content:b.error,autoHideDelay:3000})}return}if(b.redirect){window.location.href=b.redirect;return}let elements=document.forms.login.querySelector(".elements");let content=document.forms.login.querySelector(".content");elements.style.display="none";content.innerHTML=b.message;content.style.display="block"})}};LoginForm.construct();