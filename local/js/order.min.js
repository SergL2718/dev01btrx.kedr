window.onload=function(){addButtonForSendDataToCustomer()};function addButtonForSendDataToCustomer(){const g=document.querySelector(".adm-detail-toolbar-right");const f=g.querySelector("a:last-child");const e=f.cloneNode(true);const c=e.getAttribute("onclick");const a=c.indexOf("[")+1;const h=c.indexOf("]",a);const d="["+c.substring(a,h)+"]";const b=[{TEXT:"Банковский счёт",ONCLICK:"Send.bill()"},{TEXT:"Ссылка на оплату картой",ONCLICK:"Send.card()"}];e.innerText="Отправить на email";document.querySelector(".adm-detail-toolbar-right").appendChild(e);e.setAttribute("onclick",c.replace(d,JSON.stringify(b)))}const Send={url:"/local/ajax/order.php?action=Send",bill:function(){Send.request("bill")},card:function(){Send.request("cards")},request:function(a){const c=new XMLHttpRequest();const b=getParams(window.location.href);BX.showWait();c.open("GET",this.url+"&type="+a+"&orderId="+b.ID,true);c.onload=function(){const d=JSON.parse(c.response);BX.closeWait();if(d.message){alert(d.message)}};c.send()}};const getParams=function(a){let params={};let parser=document.createElement("a");parser.href=a;let query=parser.search.substring(1);let vars=query.split("&");for(let i=0;i<vars.length;i++){let pair=vars[i].split("=");params[pair[0]]=decodeURIComponent(pair[1])}return params};