if(window){window.bxrM2EcommerceV1={resizeVerticalBlock:function(d){var c=[];var a=[];var e=[];var b=[];$(".bxr-m2-ecommerce-v1[data-resize=1]").each(function(){if($(this).data("resize")==2&&d!="true"){return}$nameContainer=$(this).children(".bxr-element-container").children(".bxr-element-name");$availContainer=$(this).children(".bxr-element-container").children(".bxr-element-avail-wrap");$priceContainer=$(this).children(".bxr-element-container").children(".bxr-element-price");$(this).height("auto");$(this).children(".bxr-element-container").height("auto");$nameContainer.height("auto");$availContainer.height("auto");$priceContainer.height("auto");$minus=$(this).children(".bxr-element-container").find(".bxr-quantity-button-minus");$qty=$(this).children(".bxr-element-container").find(".bxr-quantity-text");$plus=$(this).children(".bxr-element-container").find(".bxr-quantity-button-plus");$basket=$(this).children(".bxr-element-container").find(".bxr-basket-add");$containerWidth=$(this).children(".bxr-element-container").width()-28;$minusWidth=$minus.width();$qtyWidth=$qty.width();$plusWidth=$plus.width();$basketWidth=$basket.width();$basketActionWidth=$minusWidth+$qtyWidth+$plusWidth+$basketWidth;if($basketActionWidth>$containerWidth||$containerWidth<174){$basket.find(".fa").addClass("bxr-fa-small");$basket.find(".basket-text").html("")}});$(".bxr-m2-ecommerce-v1[data-resize=1]").each(function(){uid=$(this).data("uid");if($(this).data("resize")==2&&d!="true"){return}$nameContainer=$(this).children(".bxr-element-container").children(".bxr-element-name");$availContainer=$(this).children(".bxr-element-container").children(".bxr-element-avail-wrap");$priceContainer=$(this).children(".bxr-element-container").children(".bxr-element-price");if(!(uid in e)){e[uid]=0}if(!(uid in a)){a[uid]=0}if(!(uid in b)){b[uid]=0}if($nameContainer.height()>e[uid]){e[uid]=$nameContainer.height()}if($availContainer.height()>a[uid]){a[uid]=$availContainer.height()}if($priceContainer.height()>b[uid]){b[uid]=$priceContainer.height()}});$(".bxr-m2-ecommerce-v1[data-resize=1]").each(function(){uid=$(this).data("uid");if($(this).data("resize")==2&&d!="true"){return}$nameContainer=$(this).children(".bxr-element-container").children(".bxr-element-name");$availContainer=$(this).children(".bxr-element-container").children(".bxr-element-avail-wrap");$priceContainer=$(this).children(".bxr-element-container").children(".bxr-element-price");if($nameContainer.height()<=e[uid]){$nameContainer.height(e[uid])}if($availContainer.height()<=a[uid]){$availContainer.height(a[uid])}if($priceContainer.height()<=b[uid]){$priceContainer.height(b[uid])}});$(".bxr-m2-ecommerce-v1[data-resize=1]").each(function(){uid=$(this).data("uid");if($(this).data("resize")==2&&d!="true"){return}if(!(uid in c)){c[uid]=0}if($(this).height()>c[uid]){c[uid]=parseInt($(this).css("height"))}});$(".bxr-m2-ecommerce-v1[data-resize=1]").each(function(){uid=$(this).data("uid");if($(this).data("resize")==2&&d!="true"){return}if($(this).height()<=c[uid]){$(this).height(c[uid]);$(this).children(".bxr-element-container").height(c[uid]-22)}})},setHoverTop:function(a){$(".bxr-m2-ecommerce-v1").each(function(){if($(this).data("resize")==2&&a!="true"){return}$(this).data("resize","2");if($(this).find(".bxr-element-hover").length){pricePos=$(this).find(".bxr-element-price").position().top;hoverHeight=$(this).find(".bxr-element-hover").height();hoverTop=pricePos-hoverHeight;$(this).find(".bxr-element-hover").css("top",hoverTop+"px")}})},setMobileClasses:function(){if(jQuery.browser.mobile){$(".bxr-m2-ecommerce-v1 .bxr-element-container .bxr-indicator-item-compare").addClass("always-show");$(".bxr-m2-ecommerce-v1 .bxr-element-container .bxr-indicator-item-favor").addClass("always-show")}},init:function(a){bxrM2EcommerceV1.resizeVerticalBlock(a);bxrM2EcommerceV1.setHoverTop(a);bxrM2EcommerceV1.setMobileClasses();$("img.lazy").lazyload()}};$(document).on("mouseover",".bxr-m2-ecommerce-v1",function(){dots=$(this).find(".slick-dots");if(dots.length&&$(this).find(".bxr-element-offers").length){$(dots).css("position","relative");$(this).find(".bxr-element-offers").prepend(dots)}});$(document).on("mouseout",".bxr-m2-ecommerce-v1",function(){dots=$(this).find(".slick-dots");if(dots.length&&$(this).find(".slick-list").length){$(dots).css("position","absolute");$(this).find(".slick-list").after(dots)}});$(window).on("load",function(){bxrM2EcommerceV1.init()});window.JCCatalogECommerce=function(a){this.productType=0;this.showQuantity=true;this.showAbsent=true;this.secondPict=false;this.showOldPrice=false;this.showPercent=false;this.showSkuProps=false;this.basketAction="ADD";this.showClosePopup=false;this.useCompare=false;this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",PICT_SLIDER_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:""};this.product={checkQuantity:false,maxQuantity:0,stepQuantity:1,isDblQuantity:false,canBuy:true,canSubscription:true,name:"",pict:{},id:0,addUrl:"",buyUrl:""};this.basketMode="";this.basketData={useProps:false,emptyProps:false,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""};this.compareData={compareUrl:"",comparePath:""};this.defaultPict={pict:null,secondPict:null};this.defaultSliderOptions={interval:3000,wrap:true};this.slider={options:{},items:[],active:null,sliding:null,paused:null,interval:null,progress:null};this.checkQuantity=false;this.maxQuantity=0;this.stepQuantity=1;this.isDblQuantity=false;this.canBuy=true;this.currentBasisPrice={};this.canSubscription=true;this.precision=6;this.precisionFactor=Math.pow(10,this.precision);this.offers=[];this.offerNum=0;this.treeProps=[];this.obTreeRows=[];this.showCount=[];this.showStart=[];this.selectedValues={};this.obProduct=null;this.obQuantity=null;this.obQuantityUp=null;this.obQuantityDown=null;this.obPict=null;this.obSecondPict=null;this.obPrice=null;this.obTree=null;this.obBuyBtn=null;this.obBasketActions=null;this.obNotAvail=null;this.obDscPerc=null;this.obSecondDscPerc=null;this.obSkuProps=null;this.obMeasure=null;this.obCompare=null;this.obPopupWin=null;this.basketUrl="";this.basketParams={};this.treeRowShowSize=5;this.treeEnableArrow={display:"",cursor:"pointer",opacity:1};this.treeDisableArrow={display:"",cursor:"default",opacity:0.2};this.lastElement=false;this.containerHeight=0;this.useEnhancedEcommerce=false;this.dataLayerName="dataLayer";this.brandProperty=false;this.errorCode=0;if("object"===typeof a){this.productType=parseInt(a.PRODUCT_TYPE,10);this.showQuantity=a.SHOW_QUANTITY;this.showAbsent=a.SHOW_ABSENT;this.secondPict=!!a.SECOND_PICT;this.showOldPrice=!!a.SHOW_OLD_PRICE;this.showPercent=!!a.SHOW_DISCOUNT_PERCENT;this.showSkuProps=!!a.SHOW_SKU_PROPS;if(!!a.ADD_TO_BASKET_ACTION){this.basketAction=a.ADD_TO_BASKET_ACTION}this.showClosePopup=!!a.SHOW_CLOSE_POPUP;this.useCompare=!!a.DISPLAY_COMPARE;this.viewMode="CARD";this.useEnhancedEcommerce=a.USE_ENHANCED_ECOMMERCE==="Y";this.dataLayerName=a.DATA_LAYER_NAME;this.brandProperty=a.BRAND_PROPERTY;this.SLIDER_INTERVAL=a.SLIDER_INTERVAL;this.visual=a.VISUAL;switch(this.productType){case 0:case 1:case 2:if(!!a.PRODUCT&&"object"===typeof(a.PRODUCT)){if(this.showQuantity){this.product.checkQuantity=a.PRODUCT.CHECK_QUANTITY;this.product.isDblQuantity=a.PRODUCT.QUANTITY_FLOAT;if(this.product.checkQuantity){this.product.maxQuantity=(this.product.isDblQuantity?parseFloat(a.PRODUCT.MAX_QUANTITY):parseInt(a.PRODUCT.MAX_QUANTITY,10))}this.product.stepQuantity=(this.product.isDblQuantity?parseFloat(a.PRODUCT.STEP_QUANTITY):parseInt(a.PRODUCT.STEP_QUANTITY,10));this.checkQuantity=this.product.checkQuantity;this.isDblQuantity=this.product.isDblQuantity;this.maxQuantity=this.product.maxQuantity;this.stepQuantity=this.product.stepQuantity;if(this.isDblQuantity){this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor}}this.product.canBuy=a.PRODUCT.CAN_BUY;if(a.PRODUCT.MORE_PHOTO_COUNT){this.product.morePhotoCount=a.PRODUCT.MORE_PHOTO_COUNT;this.product.morePhoto=a.PRODUCT.MORE_PHOTO}this.product.canSubscription=a.PRODUCT.SUBSCRIPTION;if(!!a.PRODUCT.BASIS_PRICE){this.currentBasisPrice=a.PRODUCT.BASIS_PRICE}this.canBuy=this.product.canBuy;this.canSubscription=this.product.canSubscription;this.product.name=a.PRODUCT.NAME;this.product.pict=a.PRODUCT.PICT;this.product.id=a.PRODUCT.ID;if(!!a.PRODUCT.ADD_URL){this.product.addUrl=a.PRODUCT.ADD_URL}if(!!a.PRODUCT.BUY_URL){this.product.buyUrl=a.PRODUCT.BUY_URL}if(!!a.BASKET&&"object"===typeof(a.BASKET)){this.basketData.useProps=!!a.BASKET.ADD_PROPS;this.basketData.emptyProps=!!a.BASKET.EMPTY_PROPS}}else{this.errorCode=-1}break;case 3:if(!!a.OFFERS&&BX.type.isArray(a.OFFERS)){if(!!a.PRODUCT&&"object"===typeof(a.PRODUCT)){this.product.name=a.PRODUCT.NAME;this.product.id=a.PRODUCT.ID}$.each(a.OFFERS,function(b){b=this.ID;if(!BXReady.Market.basketValues[b]){BXReady.Market.basketValues[b]=this.BASKET_VALUES}});this.offers=a.OFFERS;this.offerNum=0;if(!!a.OFFER_SELECTED){this.offerNum=parseInt(a.OFFER_SELECTED,10)}if(isNaN(this.offerNum)){this.offerNum=0}if(!!a.TREE_PROPS){this.treeProps=a.TREE_PROPS}if(!!a.DEFAULT_PICTURE){this.defaultPict.pict=a.DEFAULT_PICTURE.PICTURE;this.defaultPict.secondPict=a.DEFAULT_PICTURE.PICTURE_SECOND}}break;default:this.errorCode=-1}if(!!a.BASKET&&"object"===typeof(a.BASKET)){if(!!a.BASKET.QUANTITY){this.basketData.quantity=a.BASKET.QUANTITY}if(!!a.BASKET.PROPS){this.basketData.props=a.BASKET.PROPS}if(!!a.BASKET.BASKET_URL){this.basketData.basketUrl=a.BASKET.BASKET_URL}if(3===this.productType){if(!!a.BASKET.SKU_PROPS){this.basketData.sku_props=a.BASKET.SKU_PROPS}}if(!!a.BASKET.ADD_URL_TEMPLATE){this.basketData.add_url=a.BASKET.ADD_URL_TEMPLATE}if(!!a.BASKET.BUY_URL_TEMPLATE){this.basketData.buy_url=a.BASKET.BUY_URL_TEMPLATE}}if(this.useCompare){if(!!a.COMPARE&&typeof(a.COMPARE)==="object"){if(!!a.COMPARE.COMPARE_PATH){this.compareData.comparePath=a.COMPARE.COMPARE_PATH}if(!!a.COMPARE.COMPARE_URL_TEMPLATE){this.compareData.compareUrl=a.COMPARE.COMPARE_URL_TEMPLATE}else{this.useCompare=false}}else{this.useCompare=false}}this.lastElement=(!!a.LAST_ELEMENT&&"Y"===a.LAST_ELEMENT)}if(0===this.errorCode){BX.ready(BX.delegate(this.Init,this))}};window.JCCatalogECommerce.prototype.Init=function(){var a=0,c="",b=null;this.obProduct=BX(this.visual.ID);if(!this.obProduct){this.errorCode=-1}this.obPict=BX(this.visual.PICT_ID);if(!this.obPict){this.errorCode=-2}if(this.secondPict&&!!this.visual.SECOND_PICT_ID){this.obSecondPict=BX(this.visual.SECOND_PICT_ID)}this.obPrice=BX(this.visual.PRICE_ID);if(!this.obPrice){this.errorCode=-16}if(this.showQuantity&&!!this.visual.QUANTITY_ID){this.obQuantity=BX(this.visual.QUANTITY_ID);if(!!this.visual.QUANTITY_UP_ID){this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)}if(!!this.visual.QUANTITY_DOWN_ID){this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID)}}if(3===this.productType&&this.offers.length>0){if(!!this.visual.TREE_ID){this.obTree=BX(this.visual.TREE_ID);if(!this.obTree){this.errorCode=-256}c=this.visual.TREE_ITEM_ID;for(a=0;a<this.treeProps.length;a++){this.obTreeRows[a]={LEFT:BX(c+this.treeProps[a].ID+"_left"),RIGHT:BX(c+this.treeProps[a].ID+"_right"),LIST:BX(c+this.treeProps[a].ID+"_list"),CONT:BX(c+this.treeProps[a].ID+"_cont")};if(!this.obTreeRows[a].LEFT||!this.obTreeRows[a].RIGHT||!this.obTreeRows[a].LIST||!this.obTreeRows[a].CONT){this.errorCode=-512;break}}}if(!!this.visual.QUANTITY_MEASURE){this.obMeasure=BX(this.visual.QUANTITY_MEASURE)}}this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID);if(!!this.obBasketActions){if(!!this.visual.BUY_ID){this.obBuyBtn=BX(this.visual.BUY_ID)}}this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS);if(this.showPercent){if(!!this.visual.DSC_PERC){this.obDscPerc=BX(this.visual.DSC_PERC)}if(this.secondPict&&!!this.visual.SECOND_DSC_PERC){this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC)}}if(this.showSkuProps){if(!!this.visual.DISPLAY_PROP_DIV){this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)}}if(this.showQuantity){if(!!this.obQuantityUp){BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this))}if(!!this.obQuantityDown){BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this))}if(!!this.obQuantity){BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))}}$("#"+this.visual.PICT_SLIDER_ID).on("init",function(e,d,g,f){$(e.currentTarget).show()});$("#"+this.visual.PICT_SLIDER_ID).slick({slidesToShow:1,slidesToScroll:1,speed:300,dots:true,arrows:false,infinite:true,lazyLoad:"ondemand",fade:true,focusOnSelect:true,autoplay:(this.SLIDER_INTERVAL>0)?true:false,autoplaySpeed:(this.SLIDER_INTERVAL>0)?this.SLIDER_INTERVAL:0});switch(this.productType){case 0:case 1:case 2:if(parseInt(this.product.morePhotoCount)>1&&this.obPictSlider){this.initializeSlider()}break;case 3:if(this.offers.length>0){b=BX.findChildren(this.obTree,{tagName:"li"},true);if(!!b&&0<b.length){for(a=0;a<b.length;a++){BX.bind(b[a],"click",BX.delegate(this.SelectOfferProp,this))}}for(a=0;a<this.obTreeRows.length;a++){BX.bind(this.obTreeRows[a].LEFT,"click",BX.delegate(this.RowLeft,this));BX.bind(this.obTreeRows[a].RIGHT,"click",BX.delegate(this.RowRight,this))}this.SetCurrent()}else{if(parseInt(this.product.morePhotoCount)>1&&this.obPictSlider){this.initializeSlider()}}break}if(!!this.obBuyBtn){if(this.basketAction==="ADD"){BX.bind(this.obBuyBtn,"click",BX.delegate(this.Add2Basket,this))}else{BX.bind(this.obBuyBtn,"click",BX.delegate(this.BuyBasket,this))}}if(this.lastElement){}if(this.useCompare){this.obCompare=BX(this.visual.COMPARE_LINK_ID);if(!!this.obCompare){BX.bind(this.obCompare,"click",BX.proxy(this.Compare,this))}}};window.JCCatalogECommerce.prototype.SelectOfferProp=function(){var a=0,c="",b="",e=[],f=null,d=BX.proxy_context;if(!!d&&d.hasAttribute("data-treevalue")){b=d.getAttribute("data-treevalue");e=b.split("_");if(this.SearchOfferPropIndex(e[0],e[1])){f=BX.findChildren(d.parentNode,{tagName:"li"},false);if(!!f&&0<f.length){for(a=0;a<f.length;a++){c=f[a].getAttribute("data-onevalue");if(c===e[1]){BX.addClass(f[a],"bx_active")}else{BX.removeClass(f[a],"bx_active")}}}}}};window.JCCatalogECommerce.prototype.SearchOfferPropIndex=function(c,l){var g="",m=false,d,b,h=[],a=[],e=-1,f={},k=[];for(d=0;d<this.treeProps.length;d++){if(this.treeProps[d].ID===c){e=d;break}}if(-1<e){for(d=0;d<e;d++){g="PROP_"+this.treeProps[d].ID;f[g]=this.selectedValues[g]}g="PROP_"+this.treeProps[e].ID;m=this.GetRowValues(f,g);if(!m){return false}if(!BX.util.in_array(l,m)){return false}f[g]=l;for(d=e+1;d<this.treeProps.length;d++){g="PROP_"+this.treeProps[d].ID;m=this.GetRowValues(f,g);if(!m){return false}a=[];if(this.showAbsent){h=[];k=[];k=BX.clone(f,true);for(b=0;b<m.length;b++){k[g]=m[b];a[a.length]=m[b];if(this.GetCanBuy(k)){h[h.length]=m[b]}}}else{h=m}if(!!this.selectedValues[g]&&BX.util.in_array(this.selectedValues[g],h)){f[g]=this.selectedValues[g]}else{if(this.showAbsent){f[g]=(h.length>0?h[0]:a[0])}else{f[g]=h[0]}}this.UpdateRow(d,f[g],m,h)}this.selectedValues=f;this.ChangeInfo()}return true};window.JCCatalogECommerce.prototype.RowLeft=function(){var b=0,c="",a=-1,d=BX.proxy_context;if(!!d&&d.hasAttribute("data-treevalue")){c=d.getAttribute("data-treevalue");for(b=0;b<this.treeProps.length;b++){if(this.treeProps[b].ID===c){a=b;break}}if(-1<a&&this.treeRowShowSize<this.showCount[a]){if(0>this.showStart[a]){this.showStart[a]++;BX.adjust(this.obTreeRows[a].LIST,{style:{marginLeft:this.showStart[a]*20+"%"}});BX.adjust(this.obTreeRows[a].RIGHT,{style:this.treeEnableArrow})}if(0<=this.showStart[a]){BX.adjust(this.obTreeRows[a].LEFT,{style:this.treeDisableArrow})}}}};window.JCCatalogECommerce.prototype.RowRight=function(){var b=0,c="",a=-1,d=BX.proxy_context;if(!!d&&d.hasAttribute("data-treevalue")){c=d.getAttribute("data-treevalue");for(b=0;b<this.treeProps.length;b++){if(this.treeProps[b].ID===c){a=b;break}}if(-1<a&&this.treeRowShowSize<this.showCount[a]){if((this.treeRowShowSize-this.showStart[a])<this.showCount[a]){this.showStart[a]--;BX.adjust(this.obTreeRows[a].LIST,{style:{marginLeft:this.showStart[a]*20+"%"}});BX.adjust(this.obTreeRows[a].LEFT,{style:this.treeEnableArrow})}if((this.treeRowShowSize-this.showStart[a])>=this.showCount[a]){BX.adjust(this.obTreeRows[a].RIGHT,{style:this.treeDisableArrow})}}}};window.JCCatalogECommerce.prototype.UpdateRow=function(g,f,a,n){var p=0,q=0,m="",b=0,s="",d={},j=false,e=false,l=false,k=0,h=this.treeEnableArrow,r=this.treeEnableArrow,c=0,o=null;if(-1<g&&g<this.obTreeRows.length){o=BX.findChildren(this.obTreeRows[g].LIST,{tagName:"li"},false);if(!!o&&0<o.length){j=("PICT"===this.treeProps[g].SHOW_MODE);b=a.length;e=this.treeRowShowSize<b;s=(e?(100/b)+"%":"20%");d={props:{className:""},style:{}};if(j){d.style.paddingTop=s}for(p=0;p<o.length;p++){m=o[p].getAttribute("data-onevalue");l=(m===f);d.props.className=(l?"bx_active":"");d.style.display="none";if(BX.util.in_array(m,a)){d.style.display="";if(l){k=q}q++}BX.adjust(o[p],d)}d={style:{marginLeft:"0%"}};if(j){BX.adjust(this.obTreeRows[g].CONT,{props:{className:(e?"bx_item_detail_scu full":"bx_item_detail_scu")}})}else{BX.adjust(this.obTreeRows[g].CONT,{props:{className:(e?"bx_item_detail_size full":"bx_item_detail_size")}})}if(e){if(k+1===b){r=this.treeDisableArrow}if(this.treeRowShowSize<=k){c=this.treeRowShowSize-k-1;d.style.marginLeft=c*20+"%"}if(0===c){h=this.treeDisableArrow}BX.adjust(this.obTreeRows[g].LEFT,{style:h});BX.adjust(this.obTreeRows[g].RIGHT,{style:r})}else{BX.adjust(this.obTreeRows[g].LEFT,{style:{display:"none"}});BX.adjust(this.obTreeRows[g].RIGHT,{style:{display:"none"}})}BX.adjust(this.obTreeRows[g].LIST,d);this.showCount[g]=b;this.showStart[g]=c}}};window.JCCatalogECommerce.prototype.GetRowValues=function(b,d){var e=0,c,a=[],f=false,g=true;if(0===b.length){for(e=0;e<this.offers.length;e++){if(!BX.util.in_array(this.offers[e].TREE[d],a)){a[a.length]=this.offers[e].TREE[d]}}f=true}else{for(e=0;e<this.offers.length;e++){g=true;for(c in b){if(b[c]!==this.offers[e].TREE[c]){g=false;break}}if(g){if(!BX.util.in_array(this.offers[e].TREE[d],a)){a[a.length]=this.offers[e].TREE[d]}f=true}}}return(f?a:false)};window.JCCatalogECommerce.prototype.GetCanBuy=function(a){var c=0,b,d=false,e=true;for(c=0;c<this.offers.length;c++){e=true;for(b in a){if(a[b]!==this.offers[c].TREE[b]){e=false;break}}if(e){if(this.offers[c].CAN_BUY){d=true;break}}}return d};window.JCCatalogECommerce.prototype.SetCurrent=function(){var f=0,e=0,a=[],g="",d=false,c={},b=[],h=this.offers[this.offerNum].TREE;for(f=0;f<this.treeProps.length;f++){g="PROP_"+this.treeProps[f].ID;d=this.GetRowValues(c,g);if(!d){break}if(BX.util.in_array(h[g],d)){c[g]=h[g]}else{c[g]=d[0];this.offerNum=0}if(this.showAbsent){a=[];b=[];b=BX.clone(c,true);for(e=0;e<d.length;e++){b[g]=d[e];if(this.GetCanBuy(b)){a[a.length]=d[e]}}}else{a=d}this.UpdateRow(f,c[g],d,a)}this.selectedValues=c;this.ChangeInfo()};window.JCCatalogECommerce.prototype.ChangeInfo=function(){var c=0,b,a=-1,d=true;for(c=0;c<this.offers.length;c++){d=true;for(b in this.selectedValues){if(this.selectedValues[b]!==this.offers[c].TREE[b]){d=false;break}}if(d){a=c;break}}if(-1<a){if(parseInt(this.offers[a].MORE_PHOTO_COUNT)>1&&this.obPictSlider){if(this.obPict){this.obPict.style.display="none"}if(this.obSecondPict){this.obSecondPict.style.display="none"}BX.cleanNode(this.obPictSlider);for(c in this.offers[a].MORE_PHOTO){if(this.offers[a].MORE_PHOTO.hasOwnProperty(c)){this.obPictSlider.appendChild(BX.create("SPAN",{props:{className:"product-item-image-slide item"+(c==0?" active":"")},style:{backgroundImage:"url("+this.offers[a].MORE_PHOTO[c].SRC+")"}}))}}if(this.obPictSliderIndicator){BX.cleanNode(this.obPictSliderIndicator);for(c in this.offers[a].MORE_PHOTO){if(this.offers[a].MORE_PHOTO.hasOwnProperty(c)){this.obPictSliderIndicator.appendChild(BX.create("DIV",{attrs:{"data-go-to":c},props:{className:"product-item-image-slider-control"+(c==0?" active":"")}}));this.obPictSliderIndicator.appendChild(document.createTextNode(" "))}}this.obPictSliderIndicator.style.display=""}if(this.obPictSliderProgressBar){this.obPictSliderProgressBar.style.display=""}this.obPictSlider.style.display="";this.initializeSlider()}else{if(this.obPictSlider){this.obPictSlider.style.display="none"}if(this.obPictSliderIndicator){this.obPictSliderIndicator.style.display="none"}if(this.obPictSliderProgressBar){this.obPictSliderProgressBar.style.display="none"}if(this.obPict){if(this.offers[a].PREVIEW_PICTURE){BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.offers[a].PREVIEW_PICTURE.SRC+")"}})}else{BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})}this.obPict.style.display=""}if(this.secondPict&&this.obSecondPict){if(this.offers[a].PREVIEW_PICTURE_SECOND){BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[a].PREVIEW_PICTURE_SECOND.SRC+")"}})}else{if(this.offers[a].PREVIEW_PICTURE.SRC){BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[a].PREVIEW_PICTURE.SRC+")"}})}else{if(this.defaultPict.secondPict){BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}})}else{BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})}}}this.obSecondPict.style.display=""}}if(this.showSkuProps&&!!this.obSkuProps){if(0===this.offers[a].DISPLAY_PROPERTIES.length){BX.adjust(this.obSkuProps,{style:{display:"none"},html:""})}else{BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[a].DISPLAY_PROPERTIES})}}$("#"+this.visual.AVAIL_ID+">div").hide();$("#"+this.visual.AVAIL_ID).children("#bxr-offer-avail-"+this.offers[a].ID).show();$("#"+this.visual.PRICE_ID+">div").hide();$("#"+this.visual.PRICE_ID).children("#bxr-offer-price-"+this.offers[a].ID).show();if(this.offers[a].NAME!==""){$("#"+this.visual.NAME).html(this.offers[a].NAME);$("#"+this.visual.NAME).attr("title",this.offers[a].NAME)}$("#"+this.visual.ID+" .bxr-counter-item-basket").data("item",this.offers[a].ID);$("#"+this.visual.ID+" .bxr-indicator-item-basket").data("item",this.offers[a].ID);$("#"+this.visual.ID+" .bxr-counter-item-basket").attr("data-item",this.offers[a].ID);$("#"+this.visual.ID+" .bxr-indicator-item-basket").attr("data-item",this.offers[a].ID);basket=window.BXReady.Market.Basket;if(basket!=undefined){if(basket.list.ITEMS!=undefined&&basket.list.ALL!=undefined){$("#"+this.visual.ID+" .bxr-counter-item-basket").html(basket.list.ALL[this.offers[a].ID]);if(basket.list.ALL[this.offers[a].ID]>0){$("#"+this.visual.ID+" .bxr-indicator-item-basket").addClass("bxr-indicator-item-active")}}else{$("#"+this.visual.ID+" .bxr-indicator-item-basket").removeClass("bxr-indicator-item-active")}}if($("#"+this.visual.FAST_VIEW_ID).length>0){$("#"+this.visual.FAST_VIEW_ID).data("offer-id",this.offers[a].ID)}if(useSkuLinks=="Y"){$("#"+this.visual.NAME).attr("href",this.offers[a].BASKET_VALUES.LINK);$("#"+this.visual.FAST_VIEW_ID).data("element-url",this.offers[a].BASKET_VALUES.LINK);$("#"+this.visual.ID+" .bxr-element-image a").attr("href",this.offers[a].BASKET_VALUES.LINK)}BXReady.Market.setBasketIds(this.offers[a].ID,"","#"+this.visual.BASKET_ACTIONS_ID);$("#"+this.visual.PICT_SLIDER_ID).slick("slickFilter",'[data-item="'+this.offers[a].ID+'"], [data-item="'+this.product.id+'"]');var e=$("#"+this.visual.PICT_SLIDER_ID).find('[data-item="'+this.product.id+'"]').length;$("#"+this.visual.PICT_SLIDER_ID).slick("slickGoTo",e);this.offerNum=a;$("#"+this.visual.PICT_SLIDER_ID).slick("slickPause")}};window.JCCatalogECommerce.prototype.setAnalyticsDataLayer=function(d){if(!this.useEnhancedEcommerce||!this.dataLayerName){return}var m={},b={},h=[],g,e,f,a,l,c;switch(this.productType){case 0:case 1:case 2:m={id:this.product.id,name:this.product.name,price:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,brand:BX.type.isArray(this.brandProperty)?this.brandProperty.join("/"):this.brandProperty};break;case 3:for(g in this.offers[this.offerNum].TREE){if(this.offers[this.offerNum].TREE.hasOwnProperty(g)){a=g.substring(5);l=this.offers[this.offerNum].TREE[g];for(e in this.treeProps){if(this.treeProps.hasOwnProperty(e)&&this.treeProps[e].ID==a){for(f in this.treeProps[e].VALUES){c=this.treeProps[e].VALUES[f];if(c.ID==l){h.push(c.NAME);break}}}}}}m={id:this.offers[this.offerNum].ID,name:this.offers[this.offerNum].NAME,price:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,brand:BX.type.isArray(this.brandProperty)?this.brandProperty.join("/"):this.brandProperty,variant:h.join("/")};break}switch(d){case"addToCart":b={event:"addToCart",ecommerce:{currencyCode:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].CURRENCY||"",add:{products:[{name:m.name||"",id:m.id||"",price:m.price||0,brand:m.brand||"",category:m.category||"",variant:m.variant||"",quantity:this.showQuantity&&this.obQuantity?this.obQuantity.value:1}]}}};break}window[this.dataLayerName]=window[this.dataLayerName]||[];window[this.dataLayerName].push(b)}};